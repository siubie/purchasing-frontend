<div class="form-inline">
	<!-- <span ng-repeat="n in selected">{{n | json}}<br/></span><br/> -->
	<span class="input-group input-group-sm">
		<select class="form-control" ng-model="itemsPerPage" ng-init="itemsPerPage=10" ng-change="currentPage=1">
			<option value="10">10</option>
			<option value="25">25</option>
			<option value="50">50</option>
			<option value="100">100</option>
		</select>
	</span>
	<button class="btn btn-default btn-sm" type="button" ng-click="openCreate()"><span class="glyphicon glyphicon-plus"></span> Tambah</button>
	<button class="btn btn-default btn-sm" type="button" ng-click="load()"><span class="glyphicon glyphicon-refresh"></span> Refresh</button>
	<div class="pull-right">
		<div class="input-group input-group-sm">
			<span class="input-group-addon" ng-show="!search.$"><span class="glyphicon glyphicon-search"></span></span>
			<span class="input-group-addon" ng-show="!!search.$" ng-click="search.$=''"><span class="glyphicon glyphicon-remove"></span></span>
			<input type="text" class="form-control" ng-model="search.$"/>
		</div>
	</div>
</div>
<br/>
<h5 ng-show="!barangs.length">Data Kosong</h5>
<div ng-show="!!barangs.length">
	<h5 ng-show="filtered.length==0">Data yang Anda Cari Tidak Ditemukan<br/><br/></h5>
	<h5 ng-show="currentPageForm.$invalid&&filtered.length>0">Masukkan Nomor Halaman yang benar<br/><br/></h5>
	<table class="table table-striped table-bordered table-condensed" ng-init="currentPage=1" ng-show="currentPage>0&&currentPage<=maxPage">
		<thead>
			<tr>
				<th style="vertical-align:middle" class="text-center" rowspan="2"><input type="checkbox" ng-model="selectedAll" ng-init="selectedAll=false" ng-change="checkDisplayed()"></th>
				<th ng-repeat="field in fields" class="text-center" ng-click="$parent.sort==field.name?$parent.reverse=!$parent.reverse:null; $parent.sort=field.name">
					<strong><span ng-bind="field.header"> </strong>
					<span ng-show="$parent.sort=='{{field.name}}'&&$parent.reverse==true" class="glyphicon glyphicon-triangle-bottom"></span>
					<span ng-show="$parent.sort=='{{field.name}}'&&$parent.reverse==false" class="glyphicon glyphicon-triangle-top"></span>
				</th>
				<th class="text-center">Pilihan</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="item in displayed = (filtered = (items | filter:search) | orderBy:sort:reverse | startFrom:(currentPage-1)*itemsPerPage | limitTo:itemsPerPage)">
				<td class="text-center"><input type="checkbox" ng-model="item.selected" ng-change="uncheckDisplayed(item.selected)"></td>
				<td ng-repeat="field in fields">
					<span ng-show="field.type=='string'" ng-bind="::item.{{field.name}}|limitTo:'30'"></span><span ng-show="item.{{field.name}}.length>=40">...</span>
					<span ng-show="field.type=='date'" ng-bind="::item.{{field.name}}|date:field.filter"></span>
					<span ng-show="field.type=='jenis'">
						<span ng-if="item.jenis">EMERGENCY</span>
						<span ng-if="!item.jenis">RUTIN</span>
					</span>
				</td>
				<td class="text-center">
					<button class="btn btn-default btn-xs" type="button" ng-click="openRead(item)"><span class="glyphicon glyphicon-search"></span></button>
					<button class="btn btn-default btn-xs" type="button" ng-click="openUpdate(item)"><span class="glyphicon glyphicon-edit"></span></button>
					<button class="btn btn-default btn-xs" type="button" ng-click="delete(item)"><span class="glyphicon glyphicon-trash"></span></button>
				</td>
			</tr>
		</tbody>
	</table>
	<div class="form-inline" ng-show="filtered.length>0">
		<span class="pull-left" ng-show="displayed.length>0">
			<span class="input-group input-group-sm" dropdown>
				<span class="input-group-addon">{{selected.length}} Dipilih</span>
				<button type="button" class="form-control btn btn-default dropdown-toggle" ng-disabled="!selected.length" dropdown-toggle>
					<span class="caret"></span>
				</button>
				<ul class="dropdown-menu" role="menu">
					<li><a href ng-click="uncheckAll()">Reset</a></li>
					<li><a href ng-click="deleteSelected()">Hapus</a></li>
				</ul>
			</span>
		</span>
		<span class="pull-right">
			<form name="currentPageForm">
				<span ng-show="displayed.length!=0&&currentPageForm.$valid" ng-bind="'Menampilkan '+((currentPage-1)*itemsPerPage+1)+'-'+(currentPage*itemsPerPage)+' dari '+(filtered.length)+' data'"></span>
				<span class="input-group input-group-sm">
					<span class="input-group-btn">
						<button type="button" class="form-control btn btn-default" ng-click="currentPage=1" ng-disabled="currentPageForm.$invalid||currentPage==1">
							<span class="glyphicon glyphicon-fast-backward"</span>
						</button>
						<button type="button" class="form-control btn btn-default" ng-click="currentPage=(currentPage-1)" ng-disabled="currentPageForm.$invalid||currentPage==1"><span class="glyphicon glyphicon-backward"</span></button>
					</span>
						<input type="number" name="currentPage" class="form-control text-center" min="1" max="{{maxPage}}" ng-max="maxPage" ng-model="currentPage" required/>
					<span class="input-group-addon"><strong>dari <span ng-bind="maxPage=(Math.ceil(filtered.length/itemsPerPage))"></span></strong></span>
					<span class="input-group-btn">
						<button type="button" class="form-control btn btn-default" ng-click="currentPage=(currentPage+1)" ng-disabled="currentPageForm.$invalid||currentPage==maxPage">
							<span class="glyphicon glyphicon-forward"</span>
						</button>
						<button type="button" class="form-control btn btn-default" ng-click="currentPage=maxPage" ng-disabled="currentPageForm.$invalid||currentPage==maxPage">
							<span class="glyphicon glyphicon-fast-forward"</span>
						</button>
					</span>
				</span>
			</form>
		</span>
	</div>
</div>
