<h3>
	<span ng-if="status">Tambah Permintaan Barang</span>
	<span ng-if="!status">Edit Permintaan Barang</span>
</h3>
<br/>
<form name="permintaanBarangForm" ng-init="status==true ? null : find()">
	<table class="table-bordered table-condensed">
		<tr>
			<td>Nomor Permintaan Barang</td>
			<td>
				<input type="text" name="nomor" ng-model="permintaanBarang.nomor" ng-if="status" ng-disabled="!status" required/>
				<span ng-if="!status" ng-bind="permintaanBarang.nomor"></span>
			</td>
		</tr>
		<tr>
			<td>Tanggal Permintaan</td>
			<td ng-bind="permintaanBarang.tanggal | date:'dd MMMM yyyy'"></td>
		</tr>
		<tr>
			<td>Permintaan Emergency</td>
			<td><input type="checkbox" name="jenis" ng-model="permintaanBarang.jenis"/></td>
		</tr>
		<tr>
			<td>Peminta</td>
			<td>
				<select name="departemen" ng-model="permintaanBarang.departemen" ng-options="departemen.departemen for departemen in departemens | orderBy: 'departemen.departemen' track by departemen.departemen" required>
					<option value="">-- Pilih Peminta --</option>
				</select>
			</td>
		</tr>
		<tr>
			<td>Periode</td>
			<td>
				<span ng-bind="permintaanBarang.periode | date: 'MMMM yyyy'"></span>
				<span
					name="periode"
					ng-model="permintaanBarang.periode"
					datepicker-mode="'month'"
					datepicker-popup="MMMM yyyy"
					datepicker-options="{
						minMode:'month',
						maxMode:'year'
					}"
					init-date="permintaanBarang.periode"
					is-open="openedPeriode"
					current-text="Sekarang"
					clear-text="Hapus"
					close-text="Tutup"
					required
				/>
				<span>
					<button type="button" ng-click="openCalendar($event,'openedPeriode')"><span class="glyphicon glyphicon-calendar"></span></button>
				</span>
			</td>
		</tr>
		<tr>
			<td>Detail Barang</td>
			<td>
				<table class="table-bordered table-condensed">
					<tr>
						<th>Nama Barang</th>
						<th>Jumlah</th>
						<th>Tanggal Butuh</th>
						<th>Pilihan</th>
					</tr>
					<tr ng-form name="detailBarangForm" ng-repeat="detailBarang in permintaanBarang.sppItemsList">
						<td>
							<ui-select name="barang" ng-model="detailBarang.barang" required>
								<ui-select-match placeholder="Nama Barang...">{{$select.selected.nama}}</ui-select-match>
								<ui-select-choices repeat="barang in barangs | filter: $select.search">
									<div ng-bind-html="barang.nama | highlight: $select.search"></div>
								</ui-select-choices>
							</ui-select>

						</td>
						<td>
							<input class="form-control" type="number" name="jumlah" ng-model="detailBarang.jumlah" min="1" required/>
						</td>
						<td>
							<span ng-bind="detailBarang.tanggalButuh | date:'dd MMMM yyyy'"></span>
							<span
								ng-model="detailBarang.tanggalButuh"
								init-date="detailBarang.tanggalButuh"
								datepicker-popup="dd MMMM yyyy"
								is-open="detailBarang.openedTanggalButuh"
								min-date="permintaanBarang.tanggal"
								startingDay="1"
								current-text="Sekarang"
								clear-text="Hapus"
								close-text="Tutup"
								required
							/>
							<span>
								<button type="button" ng-click="opentanggalButuh($event, detailBarang)"><span class="glyphicon glyphicon-calendar"></span></button>
							</span>
						</td>
						<td><button type="button" ng-click="removeDetail($index)"><span class="glyphicon glyphicon-minus"></span></button></td>
					</tr>
				</table>
				<button type="button" ng-click="addDetail()"><span class="glyphicon glyphicon-plus"></span></button></button>
			</td>
		</tr>
	</table>
	<br/>
	<input type="submit" value="Simpan" ng-click="status==true ? create() : update()" ng-disabled="permintaanBarangForm.$invalid || !permintaanBarang.sppItemsList.length"/>
	<button type="button" ng-click="delete()" ng-show="!status">Hapus</button>
	<button type="button" ng-click="back()">Kembali</button>
</form>
