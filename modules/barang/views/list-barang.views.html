<div ng-init=load()>
<h4>Master Barang</h4>
<br/>
<button class="btn btn-default btn-sm" type="button" ng-click="openCreate()"><span class="glyphicon glyphicon-plus"></span> Tambah</button>
<button class="btn btn-default btn-sm" type="button" ng-click="load()"><span class="glyphicon glyphicon-refresh"></span> Refresh</button>
<br/>
<br/>
<h4 ng-show="!barangs.length">Data Permintaan Barang Kosong</h4>
<div ng-show="!!barangs.length">
	<table class="table-condensed">
		<tr>
			<td>Filter di Semua</td>
			<td>
				<div class="input-group input-group-sm">
					<span class="input-group-addon" ng-show="!search.$"><span class="glyphicon glyphicon-search"></span></span>
					<span class="input-group-addon" ng-show="!!search.$" ng-click="search.$=''"><span class="glyphicon glyphicon-remove"></span></span>
					<input type="text" class="form-control" ng-model="search.$"/>
				</div>
			</td>
		</tr>
	</table>
	<br/>
	<!-- <div ng-repeat="barang in filtered">{{$index}} : {{barang | json}}</div> -->
	<table class="table table-striped table-bordered table-condensed" ng-init="currentPage=1;reverse=false">
		<tdead>
			<tr>
				<td style="vertical-align:middle" class="text-center col-xs-1" rowspan="2"><input type="checkbox" ng-model="selectedAll" ng-init="selectedAll=false" ng-change="checkDisplayed()"></td>
				<td class="active text-center col-xs-1" ng-click="sort=='kode'?reverse=!reverse:null;sort='kode'">
					<strong>Kode </strong>
					<span ng-show="sort=='kode'&&reverse==true" class="glyphicon glyphicon-triangle-bottom"></span>
					<span ng-show="sort=='kode'&&reverse==false" class="glyphicon glyphicon-triangle-top"></span>
				</td>
				<td class="active text-center col-xs-1" ng-click="sort=='kategori'?reverse=!reverse:null;sort='kategori'">
					<strong>Kategori </strong>
					<span ng-show="sort=='kategori'&&reverse==true" class="glyphicon glyphicon-triangle-bottom"></span>
					<span ng-show="sort=='kategori'&&reverse==false" class="glyphicon glyphicon-triangle-top"></span>
				</td>
				<td class="active text-center col-xs-2" ng-click="sort=='nama'?reverse=!reverse:null;sort='nama'">
					<strong>Nama </strong>
					<span ng-show="sort=='nama'&&reverse==true" class="glyphicon glyphicon-triangle-bottom"></span>
					<span ng-show="sort=='nama'&&reverse==false" class="glyphicon glyphicon-triangle-top"></span>
				</td>
				<td class="active text-center col-xs-2" ng-click="sort=='alias'?reverse=!reverse:null;sort='alias'">
					<strong>Alias </strong>
					<span ng-show="sort=='alias'&&reverse==true" class="glyphicon glyphicon-triangle-bottom"></span>
					<span ng-show="sort=='alias'&&reverse==false" class="glyphicon glyphicon-triangle-top"></span>
				</td>
				<td class="active text-center col-xs-1" ng-click="sort=='satuan'?reverse=!reverse:null;sort='satuan'">
					<strong>Satuan </strong>
					<span ng-show="sort=='satuan'&&reverse==true" class="glyphicon glyphicon-triangle-bottom"></span>
					<span ng-show="sort=='satuan'&&reverse==false" class="glyphicon glyphicon-triangle-top"></span>
				</td>
				<td class="active text-center col-xs-2" ng-click="sort=='deskripsi'?reverse=!reverse:null;sort='deskripsi'">
					<strong>Deskripsi </strong>
					<span ng-show="sort=='deskripsi'&&reverse==true" class="glyphicon glyphicon-triangle-bottom"></span>
					<span ng-show="sort=='deskripsi'&&reverse==false" class="glyphicon glyphicon-triangle-top"></span>
				</td>
				<td class="text-center col-xs-2">
					<span ng-bind="(currentPage-1)*itemsPerPage+1"></span>
					<span>-</span>
					<span ng-bind="currentPage*itemsPerPage"></span>
					<span>dari</span>
					<span ng-bind="filtered.length"></span>
					<span>Item</span>
				</td>
			</tr>
			<tr>
				<td>
					<div class="input-group input-group-sm">
						<span class="input-group-addon" ng-show="!search.kode"><span class="glyphicon glyphicon-search"></span></span>
						<span class="input-group-addon" ng-show="!!search.kode" ng-click="search.kode=''"><span class="glyphicon glyphicon-remove"></span></span>
						<input type="text" class="form-control" ng-model="search.kode"/>
					</div>
				</td>
				<td>
					<div class="input-group input-group-sm">
						<span class="input-group-addon" ng-show="!search.kategori"><span class="glyphicon glyphicon-search"></span></span>
						<span class="input-group-addon" ng-show="!!search.kategori" ng-click="search.kategori=''"><span class="glyphicon glyphicon-remove"></span></span>
						<input type="text" class="form-control" ng-model="search.kategori"/>
					</div>
				</td>
				<td>
					<div class="input-group input-group-sm">
						<span class="input-group-addon" ng-show="!search.nama"><span class="glyphicon glyphicon-search"></span></span>
						<span class="input-group-addon" ng-show="!!search.nama" ng-click="search.nama=''"><span class="glyphicon glyphicon-remove"></span></span>
						<input type="text" class="form-control" ng-model="search.nama"/>
					</div>
				</td>
				<td>
					<div class="input-group input-group-sm">
						<span class="input-group-addon" ng-show="!search.alias"><span class="glyphicon glyphicon-search"></span></span>
						<span class="input-group-addon" ng-show="!!search.alias" ng-click="search.alias=''"><span class="glyphicon glyphicon-remove"></span></span>
						<input type="text" class="form-control" ng-model="search.alias"/>
					</div>
				</td>
				<td>
					<div class="input-group input-group-sm">
						<span class="input-group-addon" ng-show="!search.satuan"><span class="glyphicon glyphicon-search"></span></span>
						<span class="input-group-addon" ng-show="!!search.satuan" ng-click="search.satuan=''"><span class="glyphicon glyphicon-remove"></span></span>
						<input type="text" class="form-control" ng-model="search.satuan"/>
					</div>
				</td>
				<td>
					<div class="input-group input-group-sm">
						<span class="input-group-addon" ng-show="!search.deskripsi"><span class="glyphicon glyphicon-search"></span></span>
						<span class="input-group-addon" ng-show="!!search.deskripsi" ng-click="search.deskripsi=''"><span class="glyphicon glyphicon-remove"></span></span>
						<input type="text" class="form-control" ng-model="search.deskripsi"/>
					</div>
				</td>
				<td class="col-xs-2">
					<span class="input-group input-group-sm">
						<span class="input-group-addon">Item per Halaman</span>
						<select class="form-control" ng-model="itemsPerPage" ng-init="itemsPerPage=5" ng-change="currentPage=1">
							<option value="5">5</option>
							<option value="10">10</option>
							<option value="25">25</option>
							<option value="50">50</option>
							<option value="100">100</option>
						</select>
					</span>
				</td>
			</tr>
		</tdead>
		<tbody>
			<tr ng-repeat="barang in displayed = (filtered = (barangs | filter:search) | orderBy:sort:reverse | startFrom:(currentPage-1)*itemsPerPage | limitTo:itemsPerPage)">
				<td class="text-center"><input type="checkbox" ng-model="barang.selected" ng-change="uncheckDisplayed(barang.selected)"></td>
				<td ng-bind="::barang.kode"></td>
				<td ng-bind="::barang.kategori"></td>
				<td ng-bind="::barang.nama"></td>
				<td ng-bind="::barang.alias"></td>
				<td ng-bind="::barang.satuan"></td>
				<td> <span ng-bind="::barang.deskripsi | limitTo:'40'"></span><span ng-if="barang.deskripsi.length >= 40">.....</span></td>
				<td class="text-center">
					<button class="btn btn-default btn-sm" type="button" ng-click="openRead(barang)"><span class="glyphicon glyphicon-search"></span></button>
					<button class="btn btn-default btn-sm" type="button" ng-click="openUpdate(barang)"><span class="glyphicon glyphicon-edit"></span></button>
					<button class="btn btn-default btn-sm" type="button" ng-click="delete(barang)"><span class="glyphicon glyphicon-trash"></span></button>
				</td>
			</tr>
		</tbody>
	</table>
	<div class="form-inline">
		<span class="pull-left">
			<span class="input-group input-group-sm" dropdown>
				<span class="input-group-addon" id="basic-addon1">{{selected.length}} Dipilih</span>
				<button type="button" class="form-control btn btn-default dropdown-toggle" ng-disabled="!selected.length" dropdown-toggle>
					<span class="caret"></span>
					<span class="sr-only">Split button!</span>
				</button>
				<ul class="dropdown-menu" role="menu">
					<li><a href ng-click="uncheckAll()">Reset</a></li>
					<li><a href ng-click="deleteSelected()">Hapus</a></li>
				</ul>
			</span>
		</span>
		<span class="pull-right">
			<span class="input-group input-group-sm">
				<span class="input-group-btn">
					<button type="button" class="form-control btn btn-default" ng-click="currentPage=1" ng-disabled="currentPage==1">
						<span class="glyphicon glyphicon-fast-backward"</span>
					</button>
				</span>
				<span class="input-group-btn">
					<button type="button" class="form-control btn btn-default" ng-click="currentPage=(currentPage-1)" ng-disabled="currentPage==1">
						<span class="glyphicon glyphicon-backward"</span>
					</button>
				</span>
				<input type="number" class="form-control text-center" min="1" max="{{maxPage}}" ng-model="currentPage"/>
				<span class="input-group-addon"><strong>dari <span ng-bind="maxPage=(Math.ceil(filtered.length/itemsPerPage))"></span></strong></span>
				<span class="input-group-btn">
					<button type="button" class="form-control btn btn-default" ng-click="currentPage=(currentPage+1)" ng-disabled="currentPage==maxPage">
						<span class="glyphicon glyphicon-forward"</span>
					</button>
				</span>
				<span class="input-group-btn">
					<button type="button" class="form-control btn btn-default" ng-click="currentPage=maxPage" ng-disabled="currentPage==maxPage">
						<span class="glyphicon glyphicon-fast-forward"</span>
					</button>
				</span>
			</span>
		</span>
	</div>
</div>
